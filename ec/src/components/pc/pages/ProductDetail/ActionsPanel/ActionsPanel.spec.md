# specs

## Check Price

- [ ] 初期マウント時は数量入力が空かつ disabled、また、価格チェックボタンも disabled
- [ ] 型番確定した場合、数量入力に「1」が入力され活性化し、価格チェックも同様に活性化する
- [ ] 下記のエラーがない場合、価格チェック API(sc_products_price_check())を実行し、数量にあわせて計算された価格と出荷日が表示される
  - [ ] ご注文数がブランクの場合、JavaScript でバリデーションエラーのメッセージをモーダルに表示する
  - [ ] ご注文数に 1 以上の数字以外を入れている場合、JavaScript でバリデーションエラーのメッセージをモーダルに表示する
  - [ ] ご注文数が最低発注数未満の場合、JavaScript でバリデーションエラーのメッセージをモーダルに表示する
  - [ ] 発注単位数量が設定されており、ご注文数がその倍数でない場合、JavaScript でバリデーションエラーのメッセージをモーダルに表示する
- [ ] 価格チェック API 実行中は次のアクションが実行不可能
  - [ ] 絞り込み条件を選択
  - [ ] 表示件数切り替えをクリック
  - [ ] 解除をクリック
  - [ ] すべて解除をクリック
  - [ ] 絞り込み条件の＋をクリック
  - [ ] 絞り込み条件のーをクリック

## Check Price (purchase link user)

- [ ] 購買連携ユーザの場合、価格チェックレスポンスの errorList を特別にハンドリングし、API006417 をエラーアイコンで、API006416 を警告アイコンで、API が返したエラーメッセージをそのまま表示する。それぞれ、複数返ってきた場合、最初の 1 件のメッセージだけを表示する。また、チェックアウト禁止ブランド、禁止インナー、禁止分析コード、チェックアウト可能単価上限超過について、価格チェック API が返したエラー情報をもとに、エラーメッセージを表示する。チェックアウト、カート追加、My 部品表追加ボタンを押した場合にも同様のチェックが行われ、エラーと判定された場合は、チェックアウト、カート追加、My 部品表追加は行わない。
- [ ] 購買連携ユーザのうち、チェックアウト可能ユーザにおいては、価格チェックの結果 WOS で見積もりが必要な状況になっても、一般ユーザと異なり、ストーク表を表示したままにする。
- [ ] 購買連携ユーザの場合、WOS で見積もるボタンと見積もりが必要である旨を示すメッセージ表示を行わない。
- [ ] 購買連携ユーザの場合、大口 UF などが発生した場合に出荷日をユーザ設定に基づいて置き換えて表示することがある。

## Order Now

- [ ] ログイン状態の有無にかかわらず、型番情報が確定していない場合には disable 状態で表示する。
- [ ] 注文権限がない場合、ログイン済み、型番確定していても Order Now ボタンは disable 状態で表示する。
- [ ] ログインしていない状態では、ログインモーダルを表示する。
- [ ] ログイン済み、数量入力なしで Order Now ボタンを押下すると、数量バリデーションモーダルが表示される。
- [ ] ご注文数が最低発注数未満の場合、 Javascript でバリデーションエラーのメッセージをモーダルに表示する。
- [ ] 発注単位数量が設定されており、ご注文数がその倍数でない場合、 Javascript でバリデーションエラーのメッセージをモーダルに表示する。
- [ ] EC 会員( customerType が 1 )の場合、決済登録請求モーダルを表示する。
- [ ] ログイン済みで、型番確定し、認証が EC ユーザーでなく、ユーザ情報取得 API のレスポンスの権限リストに 4:注文 が含まれている場合、 WOS 注文入力画面へ同窓遷移する。 /mypage/direct_order.html にパラメータを指定して遷移する。ご注文数の先頭に 0 がついていた場合、ゼロサプレスする。

## Checkout

- [ ] 購買連携ユーザーのうち、チェックアウト可能ユーザの場合、今すぐ注文ボタンは非表示になり、チェックアウトボタンが表示される。
- [ ] 購買連携ユーザーのうち、チェックアウト不可ユーザの場合、チェックアウトボタンは非表示となる。
- [ ] 購買連携ユーザーのうち、チェックアウト可能ユーザの場合、見積必要時も価格、出荷日表示をする。
- [ ] 購買連携ユーザーのうち、チェックアウト可能ユーザの場合、型番に禁止文字があるとエラーメッセージモーダルが表示される。
- [ ] 購買連携ユーザーのうち、チェックアウト可能ユーザでアンフィット時チェックアウト可能ユーザーの場合
  - [ ] 数量を購入可能数に設定し Check Out を押下すると遷移する。
  - [ ] 数量を大口 UF になるように設定し Check Out を押下すると、 Next ボタン/ Close ボタンを選択できるモーダルが表示される。Next ボタンを押下すると遷移し、 Close ボタンを押下するとモーダルが閉じる。
  - [ ] 数量を購入可能数に設定し Add To Cart を押下すると、 AddToCartModal が表示される。
  - [ ] 数量を大口 UF になるように設定し Add To Cart を押下すると、 Next ボタン/ Close ボタンを選択できるモーダルが表示される。Next ボタンを押下すると AddToCartModal に移行し、 Close ボタンを押下するとモーダルが閉じる。
  - [ ] 数量を購入可能数に設定し Add To My Components を押下すると、 AddToMyComponentsModal が表示される。
  - [ ] 数量を大口 UF になるように設定し Add To My Components を押下すると、 Next ボタン/ Close ボタンを選択できるモーダルが表示される。Next ボタンを押下すると AddToMyComponentsModal に移行し、 Close ボタンを押下するとモーダルが閉じる。
- [ ] 購買連携ユーザーのうち、チェックアウト可能ユーザでアンフィット時チェックアウト不可能ユーザーの場合
  - [ ] 数量を購入可能数に設定し Check Out を押下すると遷移する。
  - [ ] 数量を大口 UF になるように設定し Check Out を押下すると、 固定のエラーメッセージモーダルが表示される。
  - [ ] 数量を購入可能数に設定し Add To Cart を押下すると、 AddToCartModal が表示される。
  - [ ] 数量を大口 UF になるように設定し Add To Cart を押下すると、固定のエラーメッセージモーダルが表示される。
  - [ ] 数量を購入可能数に設定し Add To My Components を押下すると、 AddToMyComponentsModal が表示される。
  - [ ] 数量を大口 UF になるように設定し Add To My Components を押下すると、固定のエラーメッセージモーダルが表示される。
- [ ] 購買連携ユーザーのうち、チェックアウト不可能ユーザでアンフィット時チェックアウト可能ユーザーの場合
  - Check Out ボタンは非表示となる。
  - [ ] 数量を購入可能数に設定し Add To Cart を押下すると、 AddToCartModal が表示される。
  - [ ] 数量を大口 UF になるように設定し Add To Cart を押下すると、 AddToCartModal が表示される。
  - [ ] 数量を購入可能数に設定し Add To My Components を押下すると、 AddToMyComponentsModal が表示される。
  - [ ] 数量を大口 UF になるように設定し Add To My Components を押下すると、 AddToMyComponentsModal が表示される。
- [ ] 購買連携ユーザーのうち、チェックアウト不可能ユーザでアンフィット時チェックアウト不可能ユーザーの場合
  - Check Out ボタンは非表示となる。
  - [ ] 数量を購入可能数に設定し Add To Cart を押下すると、 AddToCartModal が表示される。
  - [ ] 数量を大口 UF になるように設定し Add To Cart を押下すると、 AddToCartModal が表示される。
  - [ ] 数量を購入可能数に設定し Add To My Components を押下すると、 AddToMyComponentsModal が表示される。
  - [ ] 数量を大口 UF になるように設定し Add To My Components を押下すると、 AddToMyComponentsModal が表示される
- [ ] タブ A で購買連携ユーザのチェックアウト可能ユーザでチェックインする。タブ B で、購買連携ユーザでないアカウントでログインする。タブ A に戻り、チェックアウトボタンを押すと、画面がリロードされ、チェックアウトできない。
- [ ] タブ A で購買連携ユーザのチェックアウト可能ユーザでチェックインする。タブ B で、購買連携のチェックアウト不可能ユーザでチェックインする。タブ A に戻り、チェックアウトボタンを押すと、画面がリロードされ、チェックアウトできない。
- [ ] タブ A で購買連携ユーザのチェックアウト可能ユーザでチェックインする。タブ B で、購買連携ユーザでないアカウントでログインする。タブ A に戻り、カート追加ボタンを押すと、タブ B でログインしたアカウントのカートに商品が追加され、画面表示もタブ B と同一になる(チェックアウトボタンが消え、今すぐ注文ボタンが表示される)。
- [ ] タブ A で購買連携ユーザのチェックアウト可能ユーザでチェックインする。タブ B で、購買連携ユーザでないアカウントでログインする。タブ A に戻り、My 部品表追加ボタンを押すと、タブ B でログインしたアカウントの My 部品表に商品が追加され、画面表示もタブ B と同一になる(チェックアウトボタンが消え、今すぐ注文ボタンが表示される)。
